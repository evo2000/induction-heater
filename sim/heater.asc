Version 4
SHEET 1 1684 1544
WIRE -144 -160 -208 -160
WIRE -128 -160 -144 -160
WIRE 928 -160 864 -160
WIRE 944 -160 928 -160
WIRE 1152 -160 1088 -160
WIRE 1168 -160 1152 -160
WIRE -208 -144 -208 -160
WIRE 864 -144 864 -160
WIRE 1088 -144 1088 -160
WIRE 768 -96 640 -96
WIRE 1024 -96 992 -96
WIRE 352 -80 336 -80
WIRE 416 -80 352 -80
WIRE 704 -64 640 -64
WIRE 720 -64 704 -64
WIRE 416 -48 224 -48
WIRE -208 -32 -208 -64
WIRE -208 -32 -256 -32
WIRE 864 -32 864 -64
WIRE 864 -32 640 -32
WIRE 992 -32 992 -96
WIRE 992 -32 864 -32
WIRE 1088 -32 1088 -48
WIRE 1248 -32 1088 -32
WIRE 1280 -32 1248 -32
WIRE -1184 -16 -1264 -16
WIRE -1168 -16 -1184 -16
WIRE -976 -16 -1040 -16
WIRE -960 -16 -976 -16
WIRE -608 -16 -736 -16
WIRE -320 -16 -384 -16
WIRE -304 -16 -320 -16
WIRE 352 -16 336 -16
WIRE 416 -16 352 -16
WIRE 1088 -16 1088 -32
WIRE -208 0 -208 -32
WIRE 144 0 80 0
WIRE 160 0 144 0
WIRE 768 0 640 0
WIRE -1264 16 -1264 -16
WIRE -1040 16 -1040 -16
WIRE 80 16 80 0
WIRE 992 32 992 -32
WIRE 1024 32 992 32
WIRE -672 48 -688 48
WIRE -608 48 -672 48
WIRE -256 48 -256 -32
WIRE -256 48 -384 48
WIRE -608 112 -688 112
WIRE -320 112 -384 112
WIRE -208 112 -208 80
WIRE -208 112 -320 112
WIRE 1088 112 1088 80
WIRE -1264 128 -1264 96
WIRE -1264 128 -1344 128
WIRE -1040 128 -1040 96
WIRE 80 128 80 96
WIRE 224 128 224 -48
WIRE 224 128 80 128
WIRE -208 144 -208 112
WIRE -1344 160 -1344 128
WIRE -1264 160 -1264 128
WIRE 80 160 80 128
WIRE -672 176 -688 176
WIRE -608 176 -672 176
WIRE -352 176 -384 176
WIRE 928 192 864 192
WIRE 944 192 928 192
WIRE 1152 192 1088 192
WIRE 1168 192 1152 192
WIRE -352 208 -352 176
WIRE 864 208 864 192
WIRE 1088 208 1088 192
WIRE -208 240 -208 208
WIRE 768 256 640 256
WIRE 1024 256 992 256
WIRE 80 272 80 240
WIRE 224 272 224 128
WIRE 416 272 224 272
WIRE -1264 288 -1264 240
WIRE -1184 288 -1264 288
WIRE -1168 288 -1184 288
WIRE -640 288 -688 288
WIRE -608 288 -640 288
WIRE 704 288 640 288
WIRE 720 288 704 288
WIRE -352 304 -352 272
WIRE 352 304 336 304
WIRE 416 304 352 304
WIRE -688 320 -688 288
WIRE 864 320 864 288
WIRE 864 320 640 320
WIRE 992 320 992 256
WIRE 992 320 864 320
WIRE 1088 320 1088 304
WIRE 1248 320 1088 320
WIRE 1280 320 1248 320
WIRE 352 336 336 336
WIRE 416 336 352 336
WIRE 1088 336 1088 320
WIRE 768 352 640 352
WIRE 992 384 992 320
WIRE 1024 384 992 384
WIRE -688 432 -688 400
WIRE 1088 464 1088 432
WIRE -192 752 -496 752
WIRE 96 752 -192 752
WIRE -944 784 -1008 784
WIRE -928 784 -944 784
WIRE -496 784 -496 752
WIRE 96 784 96 752
WIRE -944 864 -1008 864
WIRE -928 864 -944 864
WIRE -608 864 -624 864
WIRE -544 864 -608 864
WIRE 208 864 144 864
WIRE 224 864 208 864
WIRE -944 912 -1008 912
WIRE -928 912 -944 912
WIRE -608 944 -624 944
WIRE -496 944 -496 880
WIRE -496 944 -608 944
WIRE -384 944 -496 944
WIRE -240 944 -304 944
WIRE -112 944 -176 944
WIRE 96 944 96 880
WIRE 96 944 -32 944
WIRE 208 944 96 944
WIRE 224 944 208 944
WIRE -1280 976 -1296 976
WIRE -1216 976 -1280 976
WIRE -944 992 -1008 992
WIRE -928 992 -944 992
WIRE -496 1008 -496 944
WIRE 96 1008 96 944
WIRE -944 1040 -1008 1040
WIRE -928 1040 -944 1040
WIRE -1280 1056 -1296 1056
WIRE -1216 1056 -1280 1056
WIRE -608 1088 -624 1088
WIRE -544 1088 -608 1088
WIRE 208 1088 144 1088
WIRE 224 1088 208 1088
WIRE -944 1120 -1008 1120
WIRE -928 1120 -944 1120
WIRE -944 1168 -1008 1168
WIRE -928 1168 -944 1168
WIRE -608 1168 -624 1168
WIRE -496 1168 -496 1104
WIRE -496 1168 -608 1168
WIRE -192 1168 -496 1168
WIRE 96 1168 96 1104
WIRE 96 1168 -192 1168
WIRE 208 1168 96 1168
WIRE 224 1168 208 1168
WIRE -944 1248 -1008 1248
WIRE -928 1248 -944 1248
FLAG -1344 160 0
FLAG -1184 -16 hv+
FLAG -1184 288 hv-
FLAG -736 -16 0
FLAG -208 240 0
FLAG -320 -16 lv+
FLAG -672 176 lv+
FLAG -320 112 trig
FLAG -672 48 trig
FLAG -1040 128 0
FLAG -976 -16 lv+
FLAG 80 272 0
FLAG 144 0 lv+
FLAG 352 304 555_out
FLAG 1248 -32 pri1+
FLAG 1248 320 pri1-
FLAG 768 0 0
FLAG 768 352 0
FLAG 352 -16 lv+
FLAG 928 -160 lv+
FLAG 928 192 lv+
FLAG 1088 464 0
FLAG 1088 112 0
FLAG 1152 -160 lv+
FLAG 1152 192 lv+
FLAG 352 336 lv+
FLAG -192 1168 hv-
FLAG -192 752 hv+
FLAG -608 864 sec1+
FLAG -608 944 sec1-
FLAG -608 1088 sec3-
FLAG -608 1168 sec3+
FLAG 208 864 sec2-
FLAG 208 944 sec2+
FLAG 208 1088 sec4+
FLAG 208 1168 sec4-
FLAG -944 784 sec1+
FLAG -944 864 sec1-
FLAG -944 912 sec2+
FLAG -944 992 sec2-
FLAG -944 1040 sec3+
FLAG -944 1120 sec3-
FLAG -944 1168 sec4+
FLAG -944 1248 sec4-
FLAG -1280 976 pri1+
FLAG -1280 1056 pri1-
FLAG 768 -96 0
FLAG 768 256 0
FLAG -688 432 0
FLAG -352 304 0
FLAG -144 -160 lv+
FLAG -640 288 555_out
FLAG 352 -80 555_out
FLAG 704 -64 lv+
FLAG 704 288 lv+
SYMBOL voltage -1264 0 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 15
SYMBOL voltage -1264 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 15
SYMBOL cap -224 144 R0
SYMATTR InstName C1
SYMATTR Value 1n
SYMBOL voltage -1040 0 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 12
SYMBOL AutoGenerated\\LM311 528 -48 R0
SYMATTR InstName U2
SYMBOL res 64 0 R0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res 64 144 R0
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res 848 -160 R0
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL AutoGenerated\\LM311 528 304 R0
SYMATTR InstName U3
SYMBOL res 848 192 R0
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL npn 1024 -144 R0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL npn 1024 208 R0
SYMATTR InstName Q2
SYMATTR Value 2N3904
SYMBOL pnp 1024 80 M180
SYMATTR InstName Q3
SYMATTR Value 2N3906
SYMBOL pnp 1024 432 M180
SYMATTR InstName Q4
SYMATTR Value 2N3906
SYMBOL ind2 -1232 1072 M180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L1
SYMATTR Value 1.9m
SYMATTR Type ind
SYMBOL ind2 -992 880 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L2
SYMATTR Value 1.9m
SYMATTR Type ind
SYMBOL ind2 -992 1008 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L3
SYMATTR Value 1.9m
SYMATTR Type ind
SYMBOL ind2 -992 1136 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L4
SYMATTR Value 1.9m
SYMATTR Type ind
SYMBOL ind2 -992 1264 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L5
SYMATTR Value 1.9m
SYMATTR Type ind
SYMBOL nmos -544 784 R0
SYMATTR InstName M3
SYMATTR Value IRF540
SYMBOL Misc\\NE555 -496 80 R0
SYMATTR InstName U1
SYMBOL voltage -688 304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value SINE(6 1 60k)
SYMBOL res -224 -16 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL cap -368 208 R0
SYMATTR InstName C2
SYMATTR Value 0.1n
SYMBOL res -224 -160 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL nmos -544 1008 R0
SYMATTR InstName M1
SYMATTR Value IRF540
SYMBOL nmos 144 784 M0
SYMATTR InstName M2
SYMATTR Value IRF540
SYMBOL nmos 144 1008 M0
SYMATTR InstName M4
SYMATTR Value IRF540
SYMBOL ind -400 960 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L6
SYMATTR Value 150µ
SYMBOL cap -176 928 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 47n
SYMBOL res -16 928 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 0.5
TEXT -1088 280 Left 2 !.tran 100u
TEXT -1304 392 Left 2 ;TODO: replace V3 with regulator
TEXT -1408 -240 Left 2 ;Power and simulation
TEXT -800 -240 Left 2 ;555 timer oscillator
TEXT 0 -240 Left 2 ;311 comparators and push-pull pairs
TEXT -1408 560 Left 2 ;1:1:1:1:1 transformer
TEXT -736 560 Left 2 ;H-bridge
TEXT -1216 680 Left 2 !K L1 L2 L3 L4 L5 0.999
TEXT -352 448 Left 2 ;TODO: fix this
TEXT -544 1264 Left 2 ;TODO: model load with measured L and C values
TEXT -1232 1408 Left 2 ;'Transistors and diodes' at http://www.bordodynov.ltwiki.org/\nhttps://www.ti.com/product/LM311
TEXT -1408 1360 Left 2 ;Dependencies
TEXT -1376 1408 Left 2 ;IRF540\nLM311
LINE Normal -1104 1248 -1104 784
LINE Normal -1120 1248 -1120 784
RECTANGLE Normal -64 512 -800 -224 2
RECTANGLE Normal -864 512 -1408 -224 2
RECTANGLE Normal -800 1312 -1408 576 2
RECTANGLE Normal 352 1312 -736 576 2
RECTANGLE Normal 1344 512 0 -224 2
RECTANGLE Normal -480 1472 -1408 1376 2
